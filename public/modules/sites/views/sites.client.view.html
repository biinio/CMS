<div ng-include="'/modules/core/views/partials/objectssidebar.html'" ng-controller="ObjectsSideBar" class=""></div>
<div ng-controller="SitesController as sites" class="">
    <div id="wrapperContent" class="container-fluid" ng-mouseleave="save()">
        <div class="right-section-content nopadding">
            <div ng-if="objectsSidebarService.selectedObject!=null && objectsSidebarService.selectedObject != {}">
                <!-- NutShell Section -->
                <section>
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <legend translate="SITES.TITLE"></legend>
                            <div ng-if="myForm.$invalid || locationForm.$invalid || objectsSidebarService.selectedObject.media.length == 0 || objectsSidebarService.selectedObject.lat == 0 || objectsSidebarService.selectedObject.lng == 0">
                                <label class="error-icon fa fa-minus-square enlarge-icon"></label>
                            </div>
                            <div ng-if="myForm.$valid && locationForm.$valid && objectsSidebarService.selectedObject.media.length > 0 && objectsSidebarService.selectedObject.lat != 0 && objectsSidebarService.selectedObject.lng != 0">
                                <label class="ready-icon fa fa-check-square-o enlarge-icon"></label>
                            </div>
                            <form name="myForm" role="form" class="form-validate">

                                <div class="section">
                                    <div class="form-group">
                                        <label for="title1" translate="SITES.NAME" class="control-label"></label>
                                        <input id="title1" ng-model="objectsSidebarService.selectedObject.title1"
                                               name="title1" type="text" placeholder="{{ 'SITES.NAME_PLACEHOLDER' | translate }}" ng-blur="validate()"
                                               required="required" class="form-control title-value"/>
                                    </div>
                                    <div class="form-group">
                                        <label for="title2" translate="SITES.AT" class="control-label"></label>
                                        <input id="title2" ng-model="objectsSidebarService.selectedObject.title2"
                                               name="title1" type="text" placeholder="{{ 'SITES.AT_PLACEHOLDER' | translate }}" ng-blur="validate()"
                                               required="required" class="form-control title-value"/>
                                    </div>

                                    <div class="form-group">
                                        <label for="email" translate="SITES.EMAIL" class=control-label"></label>
                                        <input id="email" ng-model="objectsSidebarService.selectedObject.email"
                                               name="email" type="text" placeholder="{{ 'SITES.EMAIL_PLACEHOLDER' | translate }}"
                                               ng-blur="validate()"
                                               class="form-control title-value"/>
                                    </div>
                                    <div class="form-group">
                                        <label for="nutshell" translate="SITES.NUTSHELL" class="control-label"></label>
                                        <input id="nutshell" ng-model="objectsSidebarService.selectedObject.nutshell"
                                               name="nutshell" type="text" placeholder="{{ 'SITES.NUTSHELL_PLACEHOLDER' | translate }}"
                                               ng-blur="validate()" ng-change="limitNutshell()"
                                               class="form-control title-value"/>
                                    </div>
                                    <div class="form-group">
                                        <label for="siteSchedule" translate="SITES.SCHEDULE" class="control-label"></label>
                                        <input id="siteSchedule" ng-model="objectsSidebarService.selectedObject.siteSchedule"
                                               name="siteSchedule" type="text" placeholder="{{ 'SITES.SCHEDULE_PLACEHOLDER' | translate }}"
                                               ng-blur="validate()"
                                               class="form-control title-value"/>
                                    </div>
                                    <div class="form-group">
                                        <label for="siteSearchTag" translate="GENERIC.SEARCH_TAGS" class="control-label"></label>
                                        <input id="siteSearchTag" type="text" tagsinput="tagsinput" ng-model="temptags"/>
                                        <span class="help-block" translate="GENERIC.SEARCH_TAGS_DESC"></span>
                                    </div>

                                </div>
                            </form>
                        </div>
                    </div>
                </section>
                <!-- Gallery Section -->
                <section>
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <legend translate="GALLERY.TITLE"></legend>
                            <p translate="GALLERY.SUB_TITLE"></p>
                            <div class="error-message" ng-show="objectsSidebarService.selectedObject.media.length == 0">* {{ 'GENERIC.GALLERIES_REQUIRED_MESSAGE' | translate }}</div>
                            <gallery ng-model="objectsSidebarService.selectedObject.media"
                                     gallery="galleries"></gallery>
                        </div>
                    </div>
                </section>
                <!-- Location Section -->
                <section>
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <legend translate="SITES.LOCATION.TITLE"></legend>
                            <p translate="SITES.LOCATION.SUB_TITLE"></p>
                            <form name="locationForm" role="form" class="form-validate">
                                <div class="section">
                                    <div class="form-group">
                                        <label for="countryText" translate="SITES.LOCATION.COUNTRY"
                                               class="control-label"></label>
                                        <input id="countryText" ng-model="objectsSidebarService.selectedObject.country"
                                               name="country" type="text" placeholder="Country **" ng-blur="validate()"
                                               required="required" class="form-control title-value"/>
                                    </div>
                                    <div class="form-group">
                                        <label for="stateText" translate="SITES.LOCATION.STATE"
                                               class="control-label"></label>
                                        <input id="stateText" ng-model="objectsSidebarService.selectedObject.state"
                                               name="state" type="text" placeholder="State **" ng-blur="validate()"
                                               required="required" class="form-control title-value"/>
                                    </div>
                                    <div class="form-group">
                                        <label for="cityText" translate="SITES.LOCATION.CITY"
                                               class="control-label"></label>
                                        <input id="cityText" ng-model="objectsSidebarService.selectedObject.city"
                                               name="city" type="text" placeholder="City **" ng-blur="validate()"
                                               required="required" class="form-control title-value"/>
                                    </div>
                                    <div class="form-group">
                                        <label for="zipText" translate="SITES.LOCATION.ZIP"
                                               class="control-label"></label>
                                        <input id="zipText" ng-model="objectsSidebarService.selectedObject.zipCode"
                                               name="zipCode" type="text" placeholder="Zip Code **" ng-blur="validate()"
                                               class="form-control title-value"/>
                                    </div>
                                    <div class="form-group">
                                        <label for="stAddresText" translate="SITES.LOCATION.ADDRESS"
                                               class="control-label"></label>
                                        <input id="stAddresText"
                                               ng-model="objectsSidebarService.selectedObject.streetAddres"
                                               name="streetAddres" type="text" placeholder="Street Address **"
                                               ng-blur="validate()" required="required"
                                               class="form-control title-value"/>
                                    </div>
                                    <div class="form-group">
                                        <label for="ubicationText" translate="SITES.LOCATION.DETAIL_LOC"
                                               class="control-label"></label>
                                        <input id="ubicationText"
                                               ng-model="objectsSidebarService.selectedObject.ubication"
                                               name="ubication" type="text" placeholder="Ubication **"
                                               ng-blur="validate()"
                                               class="form-control title-value"/>
                                    </div>
                                    <div class="form-group">
                                        <label for="phoneNumText" translate="SITES.LOCATION.PHONE"
                                               class="control-label"></label>
                                        <input id="phoneNumText"
                                               ng-model="objectsSidebarService.selectedObject.phoneNumber"
                                               name="phoneNumber" type="text" placeholder="Phone number **"
                                               ng-blur="validate()"
                                               class="form-control title-value"/>
                                    </div>
                                </div>
                                <div class="section">
                                    <h4 translate="SITES.LOCATION.MAP_LOCATION"></h4>

                                    <p translate="SITES.LOCATION.MAP_LOCATION_SUB"></p>
                                    <div class="error-message" ng-show="objectsSidebarService.selectedObject.lat == 0 || objectsSidebarService.selectedObject.lng == 0">* {{ 'GENERIC.MAP_REQUIRED_MESSAGE' | translate }}</div>
                                    <div class="form-group">
                                        <label for="latText" translate="SITES.LOCATION.LATITUDE"
                                               class="col-sm-2 control-label"></label>

                                        <div class="col-sm-10">
                                            <label id="latText">{{ objectsSidebarService.selectedObject.lat }}</label>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="lngText" translate="SITES.LOCATION.LONGITUDE"
                                               class="col-sm-2 control-label"></label>

                                        <div class="col-sm-10">
                                            <label id="lngText">{{ objectsSidebarService.selectedObject.lng }}</label>
                                        </div>
                                    </div>
                                    <div class="mapWrapper">
                                        <div zoom="17" lat="{{objectsSidebarService.selectedObject.lat}}"
                                             lng="{{objectsSidebarService.selectedObject.lng}}" staticmap="staticmap"
                                             ng-click="showMapModal()" class="staticmap"></div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </section>
                <!-- Categories Section -->
                <section>
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <legend>Categories</legend>
                            <p translate="CATEGORY.CATEGORIES_DESCRIPTION"></p>
                            <div class="section">
                                <div id="categories">
                                    <div class="container-fluid">
                                        <div ng-repeat="cat in categories" class="col-md-4 catModule">
                                            <div class="checkbox c-checkbox">
                                                <label>
                                                    <input ng-click="updateSelectedCategories(cat)" ng-checked="containsCategory(cat) == true" type="checkbox"/>
                                                    <span class="fa fa-check"></span>
                                                    {{cat.displayName}}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <button  type="button" ng-if="deletePermit" class="btn btn-oval btn-danger align-right" ng-click="deleteSite(' {{'GENERIC.DELETE_SITE_CONFIRMATION' | translate}} ', objectsSidebarService.selectedObject)">{{ 'GENERIC.DELETE_SITE' | translate }}</button>
                <!--code ng-hide="true">{{'GENERIC.IDENTIFIER' | translate}} :
                    {{objectsSidebarService.selectedObject.identifier }}</code-->
                <code>IDENTIFIER: {{objectsSidebarService.selectedObject.identifier}}</code>
                <br>
                <code>MINOR: {{objectsSidebarService.selectedObject.minorCounter}}</code>
                <br>
                <code>MAJOR: {{objectsSidebarService.selectedObject.major}}</code>
            </div>
            <div ng-if="objectsSidebarService.selectedObject==null || objectsSidebarService.selectedObject == {}" class="no-object-container">
                <section class="text-center on-no-object-selected">
                    <span>Por favor seleccione un local en la barra lateral o cree uno presionando el botón de crear nuevo.</span>
                </section>
            </div>
        </div>
    </div>
</div>
